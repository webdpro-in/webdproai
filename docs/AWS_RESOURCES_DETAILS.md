# WebDPro AWS Resources & Connections

This document contains the gathered details of all AWS resources connected to the WebDPro application. This serves as a reference for the "pin-to-pin" details requested.

## 1. Core Infrastructure
- **Cloud Provider**: AWS (Amazon Web Services)
- **Region**: `eu-north-1` (Stockholm)
- **Deployment Framework**: Serverless Framework V3

## 2. API Gateway (The Entry Point)
All frontend requests go through this HTTP API (v2).
- **Public URL**: `https://93vhhkyxx7.execute-api.eu-north-1.amazonaws.com/dev`
- **CORS Configured Origins**:
  - `http://localhost:3000`
  - `https://webdpro.in`
  - `https://d3qhkomcxcxmtl.cloudfront.net`

## 3. Storage (S3)
Used for storing generated website assets (HTML, CSS, Images).
- **Bucket Name**: `webdpro-ai-storage-dev`
- **Region**: `eu-north-1`
- **Access**: Managed via Signed URLs or CloudFront.

## 4. Database (DynamoDB)
NoSQL database for high-speed access.
- **Prefix**: `webdpro-`
- **Tables**:
  1.  `webdpro-users` (PK: `phone`) - Stores user profiles.
  2.  `webdpro-stores` (PK: `tenant_id`, SK: `store_id`) - Stores generated websites.
  3.  `webdpro-tenants` (PK: `tenant_id`) - Managing tenant accounts.
  4.  `webdpro-orders` (PK: `order_id`) - E-commerce orders for sites.
  5.  `webdpro-payments` (PK: `payment_id`) - Transaction logs.
  6.  `webdpro-products` (PK: `store_id`, SK: `product_id`) - Inventory items.
  7.  `webdpro-delivery` (PK: `delivery_id`) - Delivery tracking.

## 5. Authentication (AWS Cognito)
Handles user login, OTPs, and Google Sign-In.
- **User Pool ID**: `eu-north-1_RfO53Cz5t`
- **Client ID**: `7g6sqvvnqsg628napds0k73190`
- **Domain**: `webdpro-auth-prod-2026.auth.eu-north-1.amazoncognito.com` (Used for Google OAuth Loop)
- **Flow**: Custom Auth (OTP) + hosted UI (Google).

## 6. Compute (AWS Lambda)
Serverless functions handling business logic.
- **Runtime**: `nodejs20.x`
- **Memory**: 256MB - 512MB
- **Functions**:
  - `auth.requestOTP` / `auth.verifyOTP` - Login logic.
  - `stores.generateStore` - Calls AI to build sites.
  - `stores.getStores` / `getStore` - Fetch dashboard data.
  - `stores.publishStore` - Triggers domain connection.
  - `orders.*` - Order management.
  - `domains.*` - DNS verification.

## 7. AI Engine (AWS Bedrock)
The "Brain" generating the code.
- **Service**: AWS Bedrock
- **Region**: `us-east-1` (Cross-region call for model availability)
- **Models Used**:
  - `anthropic.claude-3-sonnet-20240229-v1:0` (Primary Code Gen)
  - `amazon.titan-image-generator-v1` (Image Assets)
- **Integration**: Accessed via `src/services/ai.ts` in backend.

## 8. Content Delivery (CloudFront)
Accelerates global access to the frontend/generated sites.
- **Distribution Domain**: `d3qhkomcxcxmtl.cloudfront.net`
- **Origin**: S3 Bucket (`webdpro-ai-storage-dev`)

## 9. Payments (External)
- **Gateway**: Razorpay
- **Integration**: `backend/src/handlers/payments.ts`
- **Key Status**: Currently using Test Keys (`env:RAZORPAY_KEY_ID`).

---
**Generated by WebDPro Engineering Agent**
